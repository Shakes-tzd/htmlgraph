<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="htmlgraph-version" content="1.0">
    <title>Track: Complete Orchestration Architecture - Progressive Disclosure System</title>
    <link rel="stylesheet" href="../styles.css">
    <style>
        /* HtmlGraph Dashboard Design System - Consolidated Track */
        :root {
            --bg-primary: #151518;
            --bg-secondary: #1C1C20;
            --bg-tertiary: #252528;
            --text-primary: #E0DED8;
            --text-secondary: #A0A0A0;
            --text-muted: #707070;
            --border: #333338;
            --border-strong: #606068;
            --accent: #CDFF00;
            --accent-text: #0A0A0A;
        }

        * { box-sizing: border-box; }

        body {
            background: var(--bg-primary);
            color: var(--text-primary);
            font-family: 'JetBrains Mono', 'SF Mono', Monaco, 'Cascadia Code', monospace;
            font-size: 14px;
            line-height: 1.6;
            margin: 0;
            padding: 2rem;
            max-width: 1200px;
            margin-inline: auto;
        }

        .track-nav {
            display: flex;
            gap: 0;
            margin-bottom: 2rem;
            border: 2px solid var(--border-strong);
            width: fit-content;
        }

        .nav-link {
            color: var(--text-secondary);
            text-decoration: none;
            padding: 0.75rem 1.5rem;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            border-right: 2px solid var(--border-strong);
            transition: all 0.15s;
        }

        .nav-link:last-child { border-right: none; }
        .nav-link:hover {
            color: var(--accent);
            background: var(--bg-tertiary);
        }

        article {
            background: var(--bg-secondary);
            border: 2px solid var(--border-strong);
        }

        header {
            padding: 2rem;
            border-bottom: 2px solid var(--border-strong);
            background: var(--bg-tertiary);
        }

        h1 {
            margin: 0 0 1rem 0;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--accent);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        h2 {
            font-size: 0.875rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-secondary);
            margin: 0 0 1rem 0;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border);
        }

        h4 { margin: 0; font-size: 0.875rem; }

        .metadata {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            font-size: 0.75rem;
        }

        .badge {
            background: var(--bg-primary);
            color: var(--text-secondary);
            padding: 0.25rem 0.75rem;
            border: 1px solid var(--border);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-size: 0.7rem;
        }

        .status-planned { color: var(--text-muted); }
        .priority-high { color: #f59e0b; border-color: #f59e0b; }
        .priority-medium { color: var(--text-secondary); }
        .priority-critical { color: #ef4444; border-color: #ef4444; }

        section {
            padding: 2rem;
            border-bottom: 1px solid var(--border);
        }

        section:last-child { border-bottom: none; }

        p { margin: 0; line-height: 1.8; }

        .requirements-list .requirement {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            padding: 1rem;
            margin-bottom: 0.75rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .criteria-list {
            list-style: none;
            counter-reset: criteria;
            padding: 0;
            margin: 0;
        }

        .criteria-list li {
            counter-increment: criteria;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            padding: 1rem 1rem 1rem 3rem;
            margin-bottom: 0.5rem;
            position: relative;
        }

        .criteria-list li::before {
            content: counter(criteria);
            position: absolute;
            left: 1rem;
            top: 1rem;
            background: var(--accent);
            color: var(--accent-text);
            width: 1.25rem;
            height: 1.25rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.7rem;
        }

        .progress-container {
            margin-bottom: 1.5rem;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.75rem;
            text-transform: uppercase;
        }

        .progress-label { color: var(--accent); font-weight: 600; }
        .progress-count { color: var(--text-secondary); }

        .progress-bar {
            width: 100%;
            height: 0.5rem;
            background: var(--bg-primary);
            border: 2px solid var(--border-strong);
        }

        .progress-fill {
            height: 100%;
            background: var(--accent);
        }

        details {
            border: 1px solid var(--border);
            margin-bottom: 0.75rem;
            background: var(--bg-tertiary);
        }

        summary {
            padding: 1rem;
            cursor: pointer;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-size: 0.8rem;
            background: var(--bg-primary);
            border-bottom: 1px solid var(--border);
        }

        summary:hover { color: var(--accent); }

        [data-task] {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        [data-task]:last-child { border-bottom: none; }

        .estimate {
            color: var(--text-muted);
            font-size: 0.75rem;
            margin-left: auto;
        }

        code {
            background: var(--bg-primary);
            padding: 0.125rem 0.375rem;
            font-size: 0.8rem;
        }
    </style>
</head>
<body>
    
        <nav class="track-nav">
            <a href="#top" class="nav-link">Track</a><a href="#overview" class="nav-link">Spec</a><a href="#plan" class="nav-link">Plan</a>
        </nav>
    <article id="trk-6676a644" data-type="track" data-status="todo" data-priority="critical">
        <header id="top">
            <h1>Complete Orchestration Architecture - Progressive Disclosure System</h1>
            <div class="metadata">
                <span class="badge status-todo">Planned</span>
                <span class="badge priority-critical">Critical Priority</span>
                <span class="badge">Created: 2026-01-03</span>
            </div>
        </header>

        <section data-section="description">
            <p>5-layer progressive disclosure architecture using the complete suite of tools (system prompt, hooks, skills, agents, spawners) effectively without repetition or unnecessary context overhead</p>
        </section>
        
            <section data-section="overview" id="overview">
                <h2>Overview</h2>
                <p>Design and implement a 5-layer progressive disclosure architecture that achieves 75% context reduction (from 3,953 to <1,000 base tokens) while adding multi-AI orchestration and automated model selection</p>
            </section>
            <section data-section="context" id="context">
                <h2>Context</h2>
                <p>Current system has monolithic system prompt (2,193 tokens) with repetitive content across layers. Need to leverage skills for progressive disclosure, hooks for automation, agents for specialized tasks, and spawners for multi-AI delegation</p>
            </section>
            <section data-section="requirements" id="requirements">
                <h2>Requirements</h2>
                <div class="requirements-list">
                    
                <article class="requirement priority-must-have" data-requirement="req-1" data-priority="must-have">
                    <h4>⏳ Reduce system prompt to <400 tokens (77% reduction)</h4>
                    <span class="badge">must-have</span>
                </article>
                <article class="requirement priority-must-have" data-requirement="req-2" data-priority="must-have">
                    <h4>⏳ Reduce CLAUDE.md to <600 tokens (73% reduction)</h4>
                    <span class="badge">must-have</span>
                </article>
                <article class="requirement priority-must-have" data-requirement="req-3" data-priority="must-have">
                    <h4>⏳ Create multi-ai-orchestration skill for model selection</h4>
                    <span class="badge">must-have</span>
                </article>
                <article class="requirement priority-must-have" data-requirement="req-4" data-priority="must-have">
                    <h4>⏳ Create code-quality skill for quality gates</h4>
                    <span class="badge">must-have</span>
                </article>
                <article class="requirement priority-must-have" data-requirement="req-5" data-priority="must-have">
                    <h4>⏳ Create spawner agents (gemini, codex, copilot)</h4>
                    <span class="badge">must-have</span>
                </article>
                <article class="requirement priority-must-have" data-requirement="req-6" data-priority="must-have">
                    <h4>⏳ Enhance hooks with task classification and skill recommendations</h4>
                    <span class="badge">must-have</span>
                </article>
                <article class="requirement priority-must-have" data-requirement="req-7" data-priority="must-have">
                    <h4>⏳ Implement automated model selection logic</h4>
                    <span class="badge">must-have</span>
                </article>
                <article class="requirement priority-must-have" data-requirement="req-8" data-priority="must-have">
                    <h4>⏳ Add htmlgraph claude --init/--continue CLI commands</h4>
                    <span class="badge">must-have</span>
                </article>
                <article class="requirement priority-should-have" data-requirement="req-9" data-priority="should-have">
                    <h4>⏳ Achieve 80% free tier usage (Gemini)</h4>
                    <span class="badge">should-have</span>
                </article>
                <article class="requirement priority-should-have" data-requirement="req-10" data-priority="should-have">
                    <h4>⏳ Complete architecture documentation</h4>
                    <span class="badge">should-have</span>
                </article>
                </div>
            </section>
            <section data-section="acceptance-criteria" id="acceptance">
                <h2>Acceptance Criteria</h2>
                <ol class="criteria-list">
                    <li>⏳ Base context <1,000 tokens (from 3,953) <code>Measure token usage before/after</code></li><li>⏳ Skills activate automatically when needed <code>Test skill triggering</code></li><li>⏳ Model selection automated (no manual choice) <code>Test automated selection</code></li><li>⏳ Spawner fallbacks work correctly <code>Test fallback chains</code></li><li>⏳ 80% cost reduction via free tier <code>Monitor cost tracking</code></li><li>⏳ htmlgraph claude --init works <code>Test CLI command</code></li>
                </ol>
            </section>
            <section data-section="plan" id="plan">
                <h2>Implementation Plan</h2>
                <div class="progress-container">
                    <div class="progress-info">
                        <span class="progress-label">0% Complete</span>
                        <span class="progress-count">(0/33 tasks)</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>
                <div class="phases-container">
                    
                <details open data-phase="phase-1">
                    <summary>Phase 1: Phase 1: System Prompt Reduction (0/4 tasks)</summary>
                    
                    <div data-task="task-1-1" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Reduce orchestrator-system-prompt-optimized.txt to <400 tokens</strong>
                        </div>
                         <span class="estimate">(2.0h)</span>
                    </div>
                    <div data-task="task-1-2" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Reduce CLAUDE.md to <600 tokens</strong>
                        </div>
                         <span class="estimate">(2.0h)</span>
                    </div>
                    <div data-task="task-1-3" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Update plugin.json version</strong>
                        </div>
                         <span class="estimate">(0.5h)</span>
                    </div>
                    <div data-task="task-1-4" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Test context reduction</strong>
                        </div>
                         <span class="estimate">(1.0h)</span>
                    </div>
                </details>
                <details  data-phase="phase-2">
                    <summary>Phase 2: Phase 2: Progressive Disclosure Skills (0/6 tasks)</summary>
                    
                    <div data-task="task-2-1" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Create multi-ai-orchestration-skill/SKILL.md</strong>
                        </div>
                         <span class="estimate">(3.0h)</span>
                    </div>
                    <div data-task="task-2-2" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Create multi-ai-orchestration-skill/REFERENCE.md</strong>
                        </div>
                         <span class="estimate">(2.0h)</span>
                    </div>
                    <div data-task="task-2-3" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Create multi-ai-orchestration-skill/EXAMPLES.md</strong>
                        </div>
                         <span class="estimate">(2.0h)</span>
                    </div>
                    <div data-task="task-2-4" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Create code-quality-skill/SKILL.md</strong>
                        </div>
                         <span class="estimate">(2.0h)</span>
                    </div>
                    <div data-task="task-2-5" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Update orchestrator-directives-skill (reduce to 500 tokens)</strong>
                        </div>
                         <span class="estimate">(1.0h)</span>
                    </div>
                    <div data-task="task-2-6" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Test skill activation</strong>
                        </div>
                         <span class="estimate">(2.0h)</span>
                    </div>
                </details>
                <details  data-phase="phase-3">
                    <summary>Phase 3: Phase 3: Spawner Agents (0/5 tasks)</summary>
                    
                    <div data-task="task-3-1" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Create gemini-spawner/AGENT.md</strong>
                        </div>
                         <span class="estimate">(2.0h)</span>
                    </div>
                    <div data-task="task-3-2" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Create codex-spawner/AGENT.md</strong>
                        </div>
                         <span class="estimate">(2.0h)</span>
                    </div>
                    <div data-task="task-3-3" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Create copilot-spawner/AGENT.md</strong>
                        </div>
                         <span class="estimate">(2.0h)</span>
                    </div>
                    <div data-task="task-3-4" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Test spawner agents with HeadlessSpawner</strong>
                        </div>
                         <span class="estimate">(3.0h)</span>
                    </div>
                    <div data-task="task-3-5" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Test fallback strategies</strong>
                        </div>
                         <span class="estimate">(2.0h)</span>
                    </div>
                </details>
                <details  data-phase="phase-4">
                    <summary>Phase 4: Phase 4: Hook-Skill Integration (0/4 tasks)</summary>
                    
                    <div data-task="task-4-1" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Enhance UserPromptSubmit with task classification</strong>
                        </div>
                         <span class="estimate">(3.0h)</span>
                    </div>
                    <div data-task="task-4-2" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Add dynamic skill recommendations</strong>
                        </div>
                         <span class="estimate">(2.0h)</span>
                    </div>
                    <div data-task="task-4-3" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Enhance PostToolUseFailure with debugging triggers</strong>
                        </div>
                         <span class="estimate">(2.0h)</span>
                    </div>
                    <div data-task="task-4-4" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Test hook-skill integration</strong>
                        </div>
                         <span class="estimate">(2.0h)</span>
                    </div>
                </details>
                <details  data-phase="phase-5">
                    <summary>Phase 5: Phase 5: Model Selection Automation (0/6 tasks)</summary>
                    
                    <div data-task="task-5-1" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Create model_selection.py module</strong>
                        </div>
                         <span class="estimate">(4.0h)</span>
                    </div>
                    <div data-task="task-5-2" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Implement select_model() function</strong>
                        </div>
                         <span class="estimate">(2.0h)</span>
                    </div>
                    <div data-task="task-5-3" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Implement get_fallback_chain() function</strong>
                        </div>
                         <span class="estimate">(1.0h)</span>
                    </div>
                    <div data-task="task-5-4" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Implement estimate_cost() function</strong>
                        </div>
                         <span class="estimate">(1.0h)</span>
                    </div>
                    <div data-task="task-5-5" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Update orchestration/__init__.py exports</strong>
                        </div>
                         <span class="estimate">(0.5h)</span>
                    </div>
                    <div data-task="task-5-6" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Test automated model selection</strong>
                        </div>
                         <span class="estimate">(2.0h)</span>
                    </div>
                </details>
                <details  data-phase="phase-6">
                    <summary>Phase 6: Phase 6: CLI Commands & Documentation (0/8 tasks)</summary>
                    
                    <div data-task="task-6-1" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Add htmlgraph claude command to cli.py</strong>
                        </div>
                         <span class="estimate">(3.0h)</span>
                    </div>
                    <div data-task="task-6-2" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Implement --init flag (load optimized prompt)</strong>
                        </div>
                         <span class="estimate">(2.0h)</span>
                    </div>
                    <div data-task="task-6-3" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Implement --continue flag (resume session)</strong>
                        </div>
                         <span class="estimate">(2.0h)</span>
                    </div>
                    <div data-task="task-6-4" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Update README.md with architecture</strong>
                        </div>
                         <span class="estimate">(2.0h)</span>
                    </div>
                    <div data-task="task-6-5" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Update AGENTS.md with spawner agents</strong>
                        </div>
                         <span class="estimate">(2.0h)</span>
                    </div>
                    <div data-task="task-6-6" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Create docs/ARCHITECTURE.md</strong>
                        </div>
                         <span class="estimate">(3.0h)</span>
                    </div>
                    <div data-task="task-6-7" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Create docs/PROGRESSIVE_DISCLOSURE.md</strong>
                        </div>
                         <span class="estimate">(2.0h)</span>
                    </div>
                    <div data-task="task-6-8" data-status="todo">
                        <input type="checkbox"  disabled>
                        <div>
                            <strong>○ Test CLI commands</strong>
                        </div>
                         <span class="estimate">(2.0h)</span>
                    </div>
                </details>
                </div>
            </section>
    </article>
</body>
</html>