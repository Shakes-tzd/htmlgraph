<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="htmlgraph-version" content="1.0">
    <title>Chore: Autofilter .htmlgraph/* Reads from Drift Scoring</title>
    <link rel="stylesheet" href="../styles.css">
</head>
<body>
    <article id="chore-drift-classification-autofilter"
             data-type="chore"
             data-status="pending"
             data-priority="high"
             data-created="2025-12-16T20:53:00Z"
             data-updated="2025-12-16T20:53:00Z"
             data-agent-assigned="claude">

        <header>
            <h1>Autofilter .htmlgraph/* Reads from Drift Scoring</h1>
            <div class="metadata">
                <span class="badge status-pending">Pending</span>
                <span class="badge priority-high">High Priority</span>
                <span class="badge type-chore">Chore</span>
            </div>
        </header>

        <nav data-graph-edges>
            <section data-edge-type="related">
                <h3>üîó Related:</h3>
                <ul>
                    <li><a href="../features/feature-self-tracking.html">feature-self-tracking: Use HtmlGraph to Track HtmlGraph Development</a></li>
                    <li><a href="../features/feature-drift-auto-classification.html">feature-drift-auto-classification: Drift Threshold Auto-Classification</a></li>
                    <li><a href="chore-drift-classification-consolidation.html">Consolidate Drift Classification System</a></li>
                </ul>
            </section>

            <section data-edge-type="blocks">
                <h3>‚ö†Ô∏è Blocks:</h3>
                <ul>
                    <li><a href="../features/feature-self-tracking.html" data-relationship="blocks">feature-self-tracking progress (false drift warnings)</a></li>
                </ul>
            </section>

            <section data-edge-type="implemented-in">
                <h3>üìù Sessions:</h3>
                <ul>
                    <li><a href="../sessions/" data-relationship="implemented-in">Current session activities</a></li>
                </ul>
            </section>
        </nav>

        <section data-properties>
            <h3>Properties</h3>
            <dl>
                <dt>Classification Type</dt>
                <dd data-key="type">CHORE - Infrastructure Maintenance</dd>

                <dt>Drift Activities Classified</dt>
                <dd data-key="activity-count" data-value="5">5 high-drift activities (0.71 score)</dd>

                <dt>Root Cause</dt>
                <dd data-key="root-cause">System metadata reads included in drift calculation</dd>

                <dt>Impact</dt>
                <dd data-key="impact">False positive drift warnings during self-tracking feature work</dd>
            </dl>
        </section>

        <section data-steps>
            <h3>Implementation Steps</h3>
            <ol>
                <li data-completed="false">
                    ‚è≥ Identify drift filtering module in server.py
                </li>
                <li data-completed="false">
                    ‚è≥ Add .htmlgraph/** exclusion pattern to drift calculation
                </li>
                <li data-completed="false">
                    ‚è≥ Add test cases for filtered drift scoring
                </li>
                <li data-completed="false">
                    ‚è≥ Verify feature-self-tracking session shows cleaner drift signals
                </li>
                <li data-completed="false">
                    ‚è≥ Document exclusion rules in code comments
                </li>
            </ol>
        </section>

        <section data-content>
            <h3>Description</h3>
            <p>During feature-self-tracking development, the drift detection system identified 5 high-drift activities (0.71 score), all consisting of reads to .htmlgraph/* infrastructure files and drift-queue.json metadata.</p>

            <p>These activities are legitimate system maintenance work (investigating drift classification), not feature drift. However, including infrastructure metadata reads in the drift calculation creates false positives that add noise to the signal.</p>

            <h4>High-Drift Activities Analyzed:</h4>
            <ul>
                <li>Skill: htmlgraph-tracker activation (system integration)</li>
                <li>Read: .htmlgraph/spikes/spike-classify-high-drift-activities.html (investigation)</li>
                <li>Read: .htmlgraph/chores/chore-drift-classification-consolidation.html (investigation)</li>
                <li>Multiple reads to drift-queue.json (metadata inspection)</li>
            </ul>

            <h4>Problem:</h4>
            <ul>
                <li>‚úó System metadata reads inflate drift scores unnecessarily</li>
                <li>‚úó Creates feedback loop where drift detection work shows as drift</li>
                <li>‚úó Prevents feature-self-tracking from progressing without noise</li>
                <li>‚úó Reduces signal-to-noise ratio for actual feature drift detection</li>
            </ul>

            <h4>Solution:</h4>
            <ol>
                <li><strong>Filter</strong>: Exclude all .htmlgraph/** files from drift scoring</li>
                <li><strong>Reasoning</strong>: System infrastructure work is not feature drift</li>
                <li><strong>Scope</strong>: Apply to both Read and Skill tool tracking</li>
                <li><strong>Verification</strong>: Test that legitimate feature drift still detected</li>
            </ol>

            <h4>Acceptance Criteria:</h4>
            <ul>
                <li>‚úì Drift scores exclude .htmlgraph/** reads</li>
                <li>‚úì System skill activations (htmlgraph-tracker, etc) not counted as drift</li>
                <li>‚úì feature-self-tracking can complete without false warnings</li>
                <li>‚úì Existing drift detection accuracy maintained for actual drift scenarios</li>
                <li>‚úì Exclusion rules documented in code</li>
            </ul>

            <h4>Files to Modify:</h4>
            <ul>
                <li><code>src/python/htmlgraph/server.py</code> - Drift calculation logic</li>
                <li><code>src/python/htmlgraph/converter.py</code> - Activity filtering (if applicable)</li>
                <li><code>tests/python/test_event_index.py</code> - Test drift filtering</li>
            </ul>
        </section>

        <section data-activity-log>
            <h3>Activity Log</h3>
            <ol reversed>
                <li data-timestamp="2025-12-16T20:53:00Z" data-agent="claude">
                    Created consolidated chore: Fix drift calculation to exclude .htmlgraph/* infrastructure reads
                </li>
            </ol>
        </section>

        <!-- Reference: Classification Rationale -->
        <section data-reference>
            <h3>Classification Rationale</h3>
            <table>
                <tr>
                    <th>Aspect</th>
                    <th>Analysis</th>
                </tr>
                <tr>
                    <td><strong>Is this a bug?</strong></td>
                    <td>Not exactly - drift detection is working as designed, but the design doesn't account for system metadata reads being excluded</td>
                </tr>
                <tr>
                    <td><strong>Is this a feature?</strong></td>
                    <td>No - we're fixing an existing system, not adding new functionality</td>
                </tr>
                <tr>
                    <td><strong>Is this a spike?</strong></td>
                    <td>No - the investigation is complete (this work item), now implementing the fix</td>
                </tr>
                <tr>
                    <td><strong>Is this a chore?</strong></td>
                    <td><strong>YES</strong> - Infrastructure maintenance to improve drift detection accuracy</td>
                </tr>
            </table>
        </section>
    </article>
</body>
</html>
