<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="htmlgraph-version" content="1.0">
    <title>Spike: Build Drift Activity Classification Framework</title>
    <link rel="stylesheet" href="../styles.css">
</head>
<body>
    <article id="spike-drift-activity-classification-framework"
             data-type="spike"
             data-status="in-progress"
             data-priority="high"
             data-created="2025-12-16T14:15:00Z"
             data-updated="2025-12-16T14:15:00Z"
             data-agent-assigned="claude">

        <header>
            <h1>Build Drift Activity Classification Framework</h1>
            <div class="metadata">
                <span class="badge status-in-progress">In Progress</span>
                <span class="badge priority-high">High Priority</span>
                <span class="badge type-spike">Spike</span>
            </div>
        </header>

        <!-- Graph Edges -->
        <nav data-graph-edges>
            <section data-edge-type="related">
                <h3>üîó Related:</h3>
                <ul>
                    <li><a href="../features/feature-self-tracking.html">Self-Tracking Feature</a></li>
                    <li><a href="spike-classify-high-drift-activities.html">Classify High-Drift Activities</a></li>
                    <li><a href="../chores/chore-drift-classification-consolidation.html">Consolidate Drift Classification</a></li>
                </ul>
            </section>

            <section data-edge-type="blocks">
                <h3>‚ö†Ô∏è Blocked By:</h3>
                <ul>
                    <li><a href="../features/feature-drift-auto-classification.html">Drift Auto-Classification Feature</a></li>
                </ul>
            </section>

            <section data-edge-type="implemented-in">
                <h3>üìù Sessions:</h3>
                <ul>
                    <li><a href="../sessions/" data-relationship="implemented-in">Current session activities</a></li>
                </ul>
            </section>
        </nav>

        <!-- Node Properties -->
        <section data-properties>
            <h3>Investigation Properties</h3>
            <dl>
                <dt>Drift Level Detected</dt>
                <dd data-key="drift-level" data-value="0.71">High (0.71)</dd>

                <dt>Activities Analyzed</dt>
                <dd data-key="activity-count" data-value="5">5 high-drift activities</dd>

                <dt>Classification Consensus</dt>
                <dd data-key="consensus">SPIKE - Framework research and design needed</dd>

                <dt>Key Question</dt>
                <dd data-key="question">How should drift-detected activities be automatically classified into work item types?</dd>
            </dl>
        </section>

        <!-- Investigation Steps -->
        <section data-steps>
            <h3>Investigation Steps</h3>
            <ol>
                <li data-completed="true" data-agent="claude">
                    ‚úÖ Analyze 5 high-drift activities targeting drift infrastructure
                </li>
                <li data-completed="true" data-agent="claude">
                    ‚úÖ Identify common patterns and signals in the activity sequence
                </li>
                <li data-completed="true" data-agent="claude">
                    ‚úÖ Classify activities into work item types (SPIKE, CHORE, FEATURE, BUG, HOTFIX)
                </li>
                <li data-completed="false">
                    ‚è≥ Design formal classification framework with decision rules
                </li>
                <li data-completed="false">
                    ‚è≥ Document classification rules and edge cases
                </li>
                <li data-completed="false">
                    ‚è≥ Create test cases for classification accuracy
                </li>
                <li data-completed="false">
                    ‚è≥ Implement automatic classification in Python API
                </li>
                <li data-completed="false">
                    ‚è≥ Integration with feature-drift-auto-classification work
                </li>
            </ol>
        </section>

        <!-- Investigation Content -->
        <section data-content>
            <h3>Objective</h3>
            <p>Design and document a framework for automatically classifying high-drift activities (activities that deviate from the current feature focus) into appropriate work item types (bug, feature, spike, chore, hotfix).</p>

            <h4>Detected High-Drift Activities (0.71 drift):</h4>
            <ul>
                <li><strong>Activity 1:</strong> Read drift-classification-consolidation.html (chore file)</li>
                <li><strong>Activity 2:</strong> Read classify-high-drift-activities.html (spike file)</li>
                <li><strong>Activity 3:</strong> Bash list existing spikes (exploration)</li>
                <li><strong>Activity 4:</strong> Read current-drift-classification-workitem.html (spike file)</li>
                <li><strong>Activity 5:</strong> Bash verify spikes directory (exploration)</li>
            </ul>

            <h4>Current Framework (Preliminary):</h4>
            <dl>
                <dt><span class="badge type-spike">SPIKE</span></dt>
                <dd>
                    <strong>Signals:</strong> Multiple reads (3+ files) ‚Ä¢ No writes ‚Ä¢ Infrastructure focus ‚Ä¢ Cross-file analysis<br>
                    <strong>Pattern:</strong> Read A ‚Üí Read B ‚Üí Read C (research pattern)<br>
                    <strong>Confidence:</strong> High when read-only exploration across related files
                </dd>

                <dt><span class="badge type-chore">CHORE</span></dt>
                <dd>
                    <strong>Signals:</strong> System maintenance ‚Ä¢ Skill activation ‚Ä¢ Metadata operations<br>
                    <strong>Pattern:</strong> Setup operations, tool activation, cleanup tasks<br>
                    <strong>Context:</strong> Focus on improving infrastructure, not user features
                </dd>

                <dt><span class="badge type-feature">FEATURE</span></dt>
                <dd>
                    <strong>Signals:</strong> Read ‚Üí Write pattern ‚Ä¢ Progressive implementation ‚Ä¢ Source modifications<br>
                    <strong>Pattern:</strong> Read doc ‚Üí Edit code ‚Üí Commit<br>
                    <strong>Evidence:</strong> File edits and graph updates
                </dd>

                <dt><span class="badge type-bug">BUG</span></dt>
                <dd>
                    <strong>Signals:</strong> Single file focus ‚Ä¢ Repeated reads ‚Ä¢ Error context ‚Ä¢ Fix patterns<br>
                    <strong>Pattern:</strong> Read error file (√óN) ‚Üí Debug ‚Üí Fix ‚Üí Test<br>
                    <strong>Context:</strong> Error messages or incorrect behavior apparent
                </dd>

                <dt><span class="badge type-hotfix">HOTFIX</span></dt>
                <dd>
                    <strong>Signals:</strong> Single focused change ‚Ä¢ Quick execution ‚Ä¢ Production context<br>
                    <strong>Pattern:</strong> Read ‚Üí Fix ‚Üí Commit ‚Üí Deploy (rapid)<br>
                    <strong>Urgency markers:</strong> Time constraints or severity signals
                </dd>
            </dl>

            <h4>Classification Rules (Preliminary):</h4>
            <ol>
                <li><strong>Rule 1 (Read-only detection):</strong> If activity contains only reads, weight SPIKE higher</li>
                <li><strong>Rule 2 (Write detection):</strong> If activity contains edits/creates, weight FEATURE higher</li>
                <li><strong>Rule 3 (File scope):</strong> If focused on single file (√ó3+ reads), consider BUG</li>
                <li><strong>Rule 4 (Infrastructure scope):</strong> If .htmlgraph/* or meta files, weight CHORE higher</li>
                <li><strong>Rule 5 (Tool activation):</strong> If Skill/Tool activation present, consider CHORE</li>
                <li><strong>Rule 6 (Urgency markers):</strong> If urgent language/production context, consider HOTFIX</li>
                <li><strong>Rule 7 (Pattern matching):</strong> Multi-file reads = SPIKE, Read-Write sequence = FEATURE</li>
            </ol>

            <h4>Edge Cases to Investigate:</h4>
            <ul>
                <li>Activity mixes SPIKE and FEATURE signals (which wins?)</li>
                <li>Very short activities (1-2 operations) classification ambiguity</li>
                <li>Background tool activations vs explicit maintenance work</li>
                <li>Reading own work items vs external documentation</li>
            </ul>

            <h4>Success Criteria for Framework:</h4>
            <ul>
                <li>‚úì Clear, deterministic classification rules</li>
                <li>‚úì Handles edge cases consistently</li>
                <li>‚úì High accuracy (>90%) on test set</li>
                <li>‚úì Documented for future maintenance</li>
                <li>‚úì Implementable in Python without external dependencies</li>
            </ul>
        </section>

        <!-- Research Findings -->
        <section data-findings>
            <h3>Key Findings from High-Drift Activities</h3>
            <ul>
                <li><strong>Meta-Circular Pattern:</strong> The activities investigating drift classification are themselves high-drift activities (0.71). The system is self-aware!</li>
                <li><strong>Multiple Valid Classifications:</strong> Same activity set can be classified as SPIKE (research), CHORE (maintenance), or FEATURE (implementing classification system)</li>
                <li><strong>Context Dependency:</strong> Classification accuracy requires understanding the feature context (current feature-self-tracking focus)</li>
                <li><strong>Framework Gap:</strong> No formal rules exist yet; current classifications are heuristic/manual</li>
                <li><strong>Integration Opportunity:</strong> This framework feeds directly into feature-drift-auto-classification</li>
            </ul>
        </section>

        <!-- Activity Log -->
        <section data-activity-log>
            <h3>Activity Log</h3>
            <ol reversed>
                <li data-timestamp="2025-12-16T14:15:00Z" data-agent="claude">
                    Created spike: Build Drift Activity Classification Framework
                </li>
                <li data-timestamp="2025-12-16T14:07:00Z" data-agent="claude">
                    Identified and analyzed 5 high-drift activities targeting drift infrastructure
                </li>
                <li data-timestamp="2025-12-16T13:59:00Z" data-agent="system">
                    High-drift activities detected with 0.71 drift confidence
                </li>
            </ol>
        </section>

        <!-- Classification Framework Template -->
        <section data-reference>
            <h3>Classification Framework Template</h3>
            <p>Framework should eventually support:</p>
            <ul>
                <li><strong>Signal Detection:</strong> Identify activity signals (reads, writes, tool activations, etc.)</li>
                <li><strong>Pattern Recognition:</strong> Match signals to known patterns (read-only, read-write, single-file focus, etc.)</li>
                <li><strong>Context Analysis:</strong> Evaluate current feature context and metadata</li>
                <li><strong>Type Scoring:</strong> Generate confidence scores for each work item type</li>
                <li><strong>Decision Logic:</strong> Select best classification with tie-breaking rules</li>
                <li><strong>Explanation:</strong> Provide human-readable reasoning for classification</li>
            </ul>

            <h4>Implementation Path:</h4>
            <ol>
                <li>Design formal decision tree/flowchart</li>
                <li>Create Pydantic models for Activity and Classification</li>
                <li>Implement signal detection module</li>
                <li>Implement pattern matching engine</li>
                <li>Create test suite with manually classified activities</li>
                <li>Integrate with drift-queue.json processing</li>
            </ol>
        </section>
    </article>
</body>
</html>
