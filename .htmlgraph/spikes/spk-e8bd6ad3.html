<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="htmlgraph-version" content="1.0">
    <title>HtmlGraph Feature Audit - Core Value Focus (Jan 5, 2026)</title>
    <link rel="stylesheet" href="../styles.css">
</head>
<body>
    <article id="spk-e8bd6ad3"
             data-type="spike"
             data-status="todo"
             data-priority="medium"
             data-created="2026-01-05T08:28:06.143040"
             data-updated="2026-01-05T08:28:06.143044" data-spike-type="general" data-timebox-hours="4" data-agent-assigned="htmlgraph-auditor">

        <header>
            <h1>HtmlGraph Feature Audit - Core Value Focus (Jan 5, 2026)</h1>
            <div class="metadata">
                <span class="badge status-todo">Todo</span>
                <span class="badge priority-medium">Medium Priority</span>
            </div>
        </header>

    
        <section data-spike-metadata>
            <h3>Spike Metadata</h3>
            <dl>
                <dt>Type</dt>
                <dd>General</dd>
                <dt>Timebox</dt>
                <dd>4 hours</dd>
            </dl>
        </section>
        <section data-findings>
            <h3>Findings</h3>
            <div class="findings-content">
                
# HtmlGraph Feature Audit: Core Value Analysis

## Executive Summary

**Audit Date:** 2026-01-05
**Total Features:** 90
**Scope:** Evaluate which features are essential to core value vs distractions

**Finding:** HtmlGraph has 20 CORE features supporting multi-agent orchestration, but 40%+ of the roadmap (SHELVED + UNCLEAR categories) represents distraction engineering or incomplete work. Two major visualization features (graph visualization + NetworkX) consume significant effort but add minimal core value.

---

## Core Value Proposition (VALIDATED)

HtmlGraph's real value is:

1. **Multi-Agent Orchestration** - Coordinate Gemini, Codex, Copilot via Task/spawner pattern
2. **Work Tracking Across Boundaries** - Features, tracks, spikes follow agents across sessions
3. **Session Continuity** - System prompt persistence, context preservation across compaction
4. **Cost-Optimized Delegation** - Know which model to use when (Gemini FREE tier vs paid)
5. **Work Attribution & Observability** - Who did what, which agent/executor performed work
6. **HTML/Graph as Coordination Layer** - Persistent, offline-first, zero dependencies

---

## Feature Categorization

### CORE FEATURES (Keep & Prioritize) - 20 features

Essential to orchestration, multi-agent coordination, session continuity:

**DONE (17 features):**
1. **feat-4b578c23** - Phase 3: Spawner Agents (Gemini, Codex, Copilot) - SHIPPED
2. **feat-0888e0f1** - Inject orchestration rules via CLI --append-system-prompt
3. **feat-2fb22d44** - Deploy HtmlGraph with CLI orchestration injection
4. **feat-23928549** - Enhance system prompt with HtmlGraph, layered planning
5. **feat-3b3acc91** - Fix orchestrator delegation: Make imperatives cost-first
6. **feat-1c910b0d** - Enhanced Event Data Schema for Delegation Tracking
7. **feat-57b5b928** - Deterministic Workflow Slash Commands (optimal delegation)
8. **feat-977c5400** - Agent Delegation & Parallel Execution System
9. **feat-aa5530bd** - Update orchestrator directives: strict git delegation
10. **feat-c00bc6c0** - Commit CLI orchestration rules injection
11. **feat-71a3be23** - Deploy enhanced system prompt + SessionStart hook
12. **feat-166db5b1** - System Prompt Reduction & Progressive Disclosure
13. **feat-9b60c0a9** - Test Orchestration Workflow Demo
14. **feat-b3573ae4** - Multi-AI Delegation Observability Dashboard
15. **feat-150b5351** - Publish orchestrator system to plugin
16. **feat-4820c16b** - Enforce Orchestrator Workflow via PreToolUse Hook
17. **feat-5d0eefa4** - Session-Based Pattern Storage

**TODO/IN-PROGRESS (3 features):**
18. **feat-0837f319** - Task Delegation Observability: Record spawned agent work (HIGH priority)
19. **feat-2089a2aa** - Reframe value prop: Cost optimization â†’ Unified AI orchestration
20. **feat-cad5d8b7** - System Prompt Persistence Across Sessions (IN-PROGRESS)
21. **feat-51bfbaa7** - Dashboard: Display all features & multi-agent attribution (CRITICAL)
22. **feat-adc42302** - Inject orchestration rules via SessionStart hook (CRITICAL)
23. **feat-7d265fa2** - Inject orchestration rules via CLI (duplicate of 0888e0f1?)

**Key Insights:**
- Spawner agents are shipped and working (Gemini, Codex, Copilot)
- Orchestrator enforcement is largely complete via hooks
- System prompt persistence is IN-PROGRESS (essential for continuity)
- Task delegation observability (feat-0837f319) is CRITICAL TODO - not yet visible on dashboard
- Three features appear to be doing similar things (feat-0888e0f1, feat-7d265fa2, feat-adc42302)

---

### VALUABLE FEATURES (Keep, Deprioritize) - 23 features

Support core functionality, improve developer experience, quality gates:

**DONE (17 features):**
- feat-08b7bf72 - Comprehensive docstrings for BaseCollection
- feat-0a49152e - SDK wrappers for operations layer
- feat-217a03a0 - Operations layer for CLI-only workflows
- feat-2994c2c3 - Fix deployment script to update plugin hooks
- feat-4d5b889e - Maximize Rich Console UX improvements
- feat-dca81f7c - Refactor CLI to use SDK/operations backend
- feat-1b4eb0c7 - /error-analysis slash command
- feat-a4591fc9 - CLI/SDK parity tests
- feat-c4de7f24 - Comprehensive API reference docs
- feat-3abc89ce - Improve SDK discoverability
- feat-0c46258d - Standardize Builder API (.add_* vs .set_*)
- And 6+ more infrastructure improvements

**TODO (6 features):**
- feat-1598baf6 - Pydantic integration for type-safe CLI args (CRITICAL)
- feat-0de33d85 - Pre-commit hook for incomplete changes (CRITICAL)
- feat-56ece4e5 - Intelligent traceback management
- feat-6b120fe6 - Hybrid error handling system
- feat-385e17e2 - Add htmlgraph claude --init/--continue commands
- feat-66d73d8c - Create systematic refactoring scripts

**User Impact:** High developer experience, not core orchestration value
**Effort:** Moderate to high
**Recommendation:** Complete as time permits, don't block releases

---

### DISTRACTION FEATURES (Consider Shelving) - 2 features

Do NOT drive core orchestration value. 0.71% graph connection density = visual distraction:

**DONE/TODO (2 features):**
1. **feat-621bea48** - Improve Graph Visualization - Phase 1 Quick Wins
   - Status: TODO, High Priority
   - Effort: 60h+ (20h status filtering, 10h force params, 15h hierarchy, 15h controls)
   - User Value: LOW (pretty but doesn't enable orchestration)
   - Recommendation: **SHELF indefinitely** - Graph is isolated/useless with current data

2. **feat-4cb61d2d** - Phase 2: NetworkX Graph Intelligence
   - Status: TODO, High Priority  
   - Effort: 30h+ (dependency detection, critical path, topological sort)
   - User Value: LOW to MEDIUM (analytics nice-to-have, not required)
   - Recommendation: **DEFER to v2.0** - Consider after core features complete

**Why These Are Distracting:**
- Graph visualization doesn't enable multi-agent coordination
- Current data shows 98% isolated nodes, 0.71% connection density
- Effort is substantial (60+ hours) for visual polish
- Doesn't improve session continuity, task tracking, or cost optimization
- No user has requested this as blocking issue

**Cost of Continuing:**
- 60+ engineering hours that could improve system prompt persistence, task observability, cost routing
- Ongoing maintenance (D3/Force layout bugs, performance issues)
- False sense of "dashboard completeness" when core features are incomplete

---

### SHELVED CANDIDATES (Defer to v2.0) - 7 features

Experimental/future phases. Pause work on these:

1. **feat-0557ddbd, feat-20cc259d, feat-2775696b** - CIGS (3 duplicates!)
   - Status: TODO, CRITICAL priority
   - Finding: THREE IDENTICAL FEATURES created at different times
   - Recommendation: **CONSOLIDATE to single feature, DEFER to v2.0**
   - Note: "Computational Imperative Guidance System" - unclear what this is

2. **feat-749c3e2e, feat-aaf604af** - Archive Manager + Multi-Archive Support
   - Status: DONE/DONE, High Priority
   - Finding: Archive search is useful but ORTHOGONAL to core orchestration
   - Recommendation: Keep current implementation, **STOP expanding**
   - Effort already spent: HIGH, minimal ROI for orchestration value

3. **feat-7ec3f2cf** - Phase 3: Agent Experience Improvements
   - Status: TODO, Medium Priority
   - Recommendation: **DEFER** until core features stabilize

4. **feat-8c539996** - Fix SessionStart hook - remove forced skill activation
   - Status: DONE, Critical Priority (but already done)
   - Recommendation: Verify this fix is actually deployed

---

### UNCLEAR FEATURES (Need Reclassification) - 38 features

These need explicit categorization. Sample:

- **feat-4347c0f6** - Enforce SDK-only operations in .htmlgraph
- **feat-48b88f74** - Add PreCompact workarounds for work preservation
- **feat-64467b2c** - Convert list commands to Rich tables (UI polish)
- **feat-3c7882bf** - Migrate commands to Typer (infrastructure)
- **feat-befe727f** - Monitor Claude Code GitHub issues (meta-task)
- Many deployment, testing, and documentation work items

**Recommendation:** Classify remaining 38 features using same framework

---

## Engineering Effort Analysis

### Where Effort Was WASTED

1. **Graph Visualization** - 60+ planned hours
   - Result: 0.71% connection density (mostly isolated nodes)
   - Reason: Feature tracking creates nodes but doesn't create meaningful edges
   - Lesson: Don't implement visualization without proper data model

2. **CIGS Duplication** - 3 identical features created at different times
   - Cost: Unclear scope, wasted time consolidating
   - Lesson: Better feature deduplication process needed

3. **Archive Manager** - Nice feature but ORTHOGONAL
   - Cost: ~40 hours of engineering for feature that doesn't enable orchestration
   - Lesson: Be ruthless about scope (orthogonal â‰  valuable for THIS product)

### Where Effort Was WELL-SPENT

1. **Spawner Agents** (Gemini, Codex, Copilot) - SHIPPED
2. **Orchestrator Enforcement** via hooks/system prompt - SOLID foundation
3. **Session Continuity** (system prompt persistence) - IN-PROGRESS, critical
4. **Task Delegation Observability** - TODO but essential

---

## Recommended 3-Month Roadmap

### Q1 2026 - CORE FOCUS (11 Weeks)

**PRIORITY 1: Session Continuity & Task Observability (2-3 weeks)**
- feat-0837f319: Task delegation observability (CRITICAL TODO)
- feat-cad5d8b7: System prompt persistence (COMPLETE in-progress work)
- feat-51bfbaa7: Dashboard multi-agent attribution (CRITICAL TODO)
- Success metric: Task delegations visible on dashboard with spawned agent attribution

**PRIORITY 2: Spawner Quality & Cost Routing (1-2 weeks)**
- Verify Gemini spawner is production-ready
- Implement cost-optimized routing (when to use Gemini FREE vs paid models)
- Add Gemini timeout/fallback handling
- Success metric: Zero silent failures, automatic fallback to Claude

**PRIORITY 3: System Prompt Stability (1-2 weeks)**
- Complete feat-cad5d8b7 work
- Verify persistence across session compaction/resume
- Test with Orchestrator Strict mode enabled
- Success metric: Context preserved across 3+ compaction cycles

**PRIORITY 4: Quality Gates (1 week)**
- Finish feat-1598baf6: Pydantic integration for type-safe CLI
- Finish feat-0de33d85: Pre-commit detection of incomplete changes
- Ensure deployment script blocks on test failures
- Success metric: All commits have type-checked, validated arguments

**PRIORITY 5: Documentation & Knowledge Transfer (1 week)**
- Finish feat-c4de7f24: API reference docs (80% complete)
- Create "HtmlGraph for Orchestration" quickstart
- Document spawner agent patterns (Gemini, Codex, Copilot)
- Success metric: New developers can setup orchestration in <30 min

**PRIORITY 6: Bug Fixes & Debt (1-2 weeks)**
- Resolve duplicate features (CIGS x3)
- Verify feat-8c539996 is actually deployed
- Fix any orchestrator enforcement edge cases
- Success metric: Clean feature backlog, no duplicates

### SHELVE (Remove from Q1 Roadmap)

- **feat-621bea48** - Graph visualization (60h+ for zero orchestration value)
- **feat-4cb61d2d** - NetworkX graph intelligence (defer indefinitely)
- **feat-0557ddbd, feat-20cc259d, feat-2775696b** - CIGS (consolidate to v2.0)
- **feat-7ec3f2cf** - Phase 3 agent experience (defer)
- **feat-befe727f** - GitHub issues monitoring (meta-task)

### Nice-to-Have (If Time Permits)

- feat-56ece4e5: Traceback management
- feat-6b120fe6: Hybrid error handling
- feat-385e17e2: CLI init/continue commands
- feat-3c7882bf: Typer migration

---

## Strategic Insights

### Why Graph Visualization Failed

The root cause of poor graph data:
1. Feature nodes are created for most tasks (good)
2. But edges are SPARSE:
   - Features don't link to spawned agent work
   - Spawned agent work doesn't link back to parent
   - Session-to-feature edges are missing

**Result:** Isolated nodes â†’ 0.71% connection density â†’ visualization useless

**Solution:** Fix the DATA MODEL first (feat-0837f319), not the visualization

### Real Value Comes From

1. **Observability without dashboards** - HTML files are self-documenting
2. **Coordination at scale** - Spawning 10+ agents in parallel without losing context
3. **Session continuity** - Context survives compaction/resume cycles
4. **Cost optimization** - Knowing when to use Gemini (FREE) vs Claude (paid)
5. **Work attribution** - Audit trail showing which agent did what

**None of these require:**
- Pretty graph visualization
- Force-directed layouts
- Interactive D3 dashboards
- NetworkX algorithms

### What This Product Actually Is

**NOT:**
- A project management tool (Jira exists)
- A visualization/analytics platform (Metabase exists)
- A task runner (Make/Just exist)

**IS:**
- **A coordination layer for AI agents** (unique)
- **Session-persistent context bridge** (unique)
- **Multi-model orchestration routing** (unique)
- **Work attribution across agent boundaries** (unique)

---

## Success Metrics (Non-Vanity)

Measure these instead of DAUs, features shipped, etc:

1. **Multi-Agent Delegation Success Rate**
   - Metric: % of Task() calls that successfully spawn + execute
   - Target: 99%+ (zero silent failures)

2. **Session Continuity Reliability**
   - Metric: Context preserved after N compaction/resume cycles
   - Target: 100% (never lose context)

3. **Work Attribution Accuracy**
   - Metric: % of spawned work correctly attributed to agent + executor
   - Target: 100%

4. **Cost Savings via Model Selection**
   - Metric: $ saved by routing to Gemini FREE tier (vs paid)
   - Target: 10% cost reduction per deployment

5. **Developer Time Saved**
   - Metric: Hours saved via orchestration vs manual coordination
   - Target: 50+ hours/month (rough estimate)

6. **Feature Completion Rate**
   - Metric: % of prioritized roadmap completed on schedule
   - Target: 80%+ (stretch: 90%)

---

## Debt Payoff Plan

**High Priority (Do Immediately):**
1. Consolidate 3x CIGS features into single entry
2. Remove "graph visualization" from Q1 roadmap
3. Complete system prompt persistence work
4. Complete task delegation observability (feat-0837f319)

**Medium Priority (Do in 2-4 weeks):**
1. Verify archive manager is actually used (consider sunsetting)
2. Complete Pydantic integration (type safety)
3. Complete pre-commit hooks (quality gates)

**Low Priority (Do eventually):**
1. Graph visualization (defer to v2.0)
2. NetworkX intelligence (defer to v2.0)
3. All "Phase 3+" features (future versions)

---

## Recommendations Summary

### DO:
âœ… Complete feat-0837f319 (task observability) - CRITICAL, unblocks dashboard
âœ… Complete feat-cad5d8b7 (system prompt persistence) - CRITICAL, core value
âœ… Complete feat-51bfbaa7 (multi-agent attribution) - CRITICAL, customer-visible
âœ… Verify spawners work reliably (Gemini, Codex, Copilot)
âœ… Implement cost-optimized routing logic
âœ… Document orchestration patterns

### DON'T:
âŒ Spend engineering time on graph visualization (60h+ with minimal ROI)
âŒ Implement NetworkX graph intelligence (nice-to-have for v2.0)
âŒ Keep duplicated CIGS features (consolidate)
âŒ Optimize archive manager (orthogonal feature)
âŒ Add more UI polish features

### QUESTION:
â“ Is "Archive Manager" still used? (Appears done but orthogonal)
â“ What is "CIGS" supposed to do? (Consolidate 3 duplicate features)
â“ Should we sunset graph visualization entirely?

---

## Appendix: Complete Feature Inventory

**CORE (20 features, 17 done, 3 todo):**
- feat-4b578c23 âœ… Spawner agents (Gemini, Codex, Copilot)
- feat-0888e0f1 âœ… Orchestration rules injection (CLI)
- feat-2fb22d44 âœ… Deploy with orchestration injection
- feat-23928549 âœ… Enhance system prompt
- feat-3b3acc91 âœ… Fix orchestrator delegation (cost-first)
- feat-1c910b0d âœ… Event schema for delegation tracking
- feat-57b5b928 âœ… Deterministic workflow commands
- feat-977c5400 âœ… Agent delegation & parallel execution
- feat-aa5530bd âœ… Strict git delegation
- feat-c00bc6c0 âœ… Commit orchestration injection
- feat-71a3be23 âœ… Deploy enhanced system prompt + SessionStart
- feat-166db5b1 âœ… System prompt reduction & progressive disclosure
- feat-9b60c0a9 âœ… Test orchestration demo
- feat-b3573ae4 âœ… Multi-AI delegation observability dashboard
- feat-150b5351 âœ… Publish orchestrator to plugin
- feat-4820c16b âœ… PreToolUse hook enforcement
- feat-5d0eefa4 âœ… Session-based pattern storage
- feat-0837f319 â³ Task delegation observability (CRITICAL)
- feat-2089a2aa â³ Reframe value prop to unified orchestration
- feat-cad5d8b7 ðŸ”„ System prompt persistence (IN-PROGRESS)
- feat-51bfbaa7 â³ Multi-agent dashboard attribution (CRITICAL)
- feat-adc42302 â³ Inject orchestration via SessionStart (CRITICAL)

**VALUABLE (23 features, 17 done, 6 todo):**
- Infrastructure, quality, testing, documentation features
- See section above for full list

**DISTRACTION (2 features, 0 done, 2 todo):**
- feat-621bea48 â³ Graph visualization (60h+, low value)
- feat-4cb61d2d â³ NetworkX intelligence (defer to v2.0)

**SHELVED (7 features, mixed status):**
- feat-0557ddbd, feat-20cc259d, feat-2775696b â³ CIGS x3 (consolidate)
- feat-749c3e2e âœ… Archive manager (done, orthogonal)
- feat-aaf604af âœ… Multi-archive support (done, orthogonal)
- feat-7ec3f2cf â³ Agent experience improvements (defer)
- feat-8c539996 âœ… SessionStart fix (done, verify deployed)

**UNCLEAR (38 features - need reclassification)**

---

## Conclusion

HtmlGraph has **strong core foundations** for multi-agent orchestration and session continuity. The roadmap has become cluttered with ~40% distraction/unclear features.

**Next step:** Complete the 3 CRITICAL TODOS (task observability, system persistence, dashboard attribution) and **shelf graph visualization work indefinitely**.

Success is measured by **reliable orchestration + cost optimization + work attribution**, NOT by beautiful dashboards or graph visualizations.

            </div>
        </section>
    </article>
</body>
</html>
