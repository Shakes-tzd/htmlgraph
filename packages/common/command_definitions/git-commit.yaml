name: git-commit
short_description: Commit and push changes using git-commit-push.sh script
category: development

parameters:
  - name: message
    required: true
    description: Commit message (supports multi-line with newlines)
  - name: skip_confirm
    required: false
    default: true
    description: Skip confirmation prompt (recommended for AI agents)

usage: |
  /htmlgraph:git-commit <message>

examples:
  - command: '/htmlgraph:git-commit "feat: add new feature"'
    description: Commit and push with simple message
  - command: '/htmlgraph:git-commit "fix(parser): handle edge case"'
    description: Commit with multi-line message
  - command: '/htmlgraph:git-commit "feat(feat-abc123): complete OAuth integration"'
    description: Commit with feature ID reference

sdk_method: null  # Uses shell script directly
cli_commands:
  - ./scripts/git-commit-push.sh "{message}" --no-confirm

output_template: |
  ‚úÖ **Changes committed and pushed**

  Commit: {commit_hash}
  Files changed: {file_count}
  Branch: main ‚Üí origin/main

behavior:
  claude_code: |
    **IMPORTANT: This command executes the git-commit-push.sh script.**

    **DO THIS:**

    1. **Construct the commit message:**
       - Use conventional commit format (feat:, fix:, chore:, etc.)
       - Include feature ID if working on tracked feature
       - Add standard footer for HtmlGraph features:
         ```
         ü§ñ Generated with Claude Code
         Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>
         ```

    2. **Execute the script:**
       ```bash
       ./scripts/git-commit-push.sh "{commit_message}" --no-confirm
       ```

    3. **Parse the output:**
       - Extract commit hash
       - Count files changed
       - Verify push succeeded

    4. **Report success:**
       Use the output template to confirm the commit

    **NEVER:**
    - ‚ùå Commit without understanding what changed
    - ‚ùå Use vague commit messages
    - ‚ùå Skip the --no-confirm flag (causes interactive prompt)

    **ALWAYS:**
    - ‚úÖ Include feature ID in message when working on tracked features
    - ‚úÖ Use conventional commit format
    - ‚úÖ Add HtmlGraph footer for tracked work

  codex: |
    Same instructions as Claude Code

  gemini: |
    Same instructions as Claude Code
