# HtmlGraph Deployment Configuration
#
# This file configures the deployment process for your project.
# You can customize steps, hooks, and plugin updates.

[project]
name = "htmlgraph"
pypi_package = "htmlgraph"  # PyPI package name (if different from project name)

[deployment]
# Deployment steps (in order)
# Available steps: git-push, build, pypi-publish, local-install, update-plugins
steps = [
    "git-push",
    "build",
    "pypi-publish",
    "local-install",
    "update-plugins"
]

[deployment.git]
branch = "main"
remote = "origin"
push_tags = true

[deployment.build]
command = "uv build"
clean_dist = true

[deployment.pypi]
# Environment variable for PyPI token (reads from .env if not set)
token_env_var = "PyPI_API_TOKEN"  # or UV_PUBLISH_TOKEN
wait_after_publish = 10  # seconds to wait after publishing

[deployment.plugins]
# Plugin update commands (uses {package} and {version} placeholders)
# Uncomment and customize as needed:
claude = "claude plugin update {package}"
# gemini = "gemini extensions update {package}"  # Not implemented yet
# codex = "codex skills update {package}"  # Not implemented yet

[deployment.hooks]
# Custom commands to run at various stages
# Commands can use {version} and {package} placeholders
pre_build = []
post_build = []
pre_publish = []
post_publish = []

# Example hooks:
# pre_build = ["python scripts/update_version.py {version}"]
# post_build = ["python scripts/validate_build.py"]
# post_publish = ["python scripts/notify_release.py {version}"]
